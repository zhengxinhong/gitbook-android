

[https://www.imooc.com/article/21823?block_id=tuijian_wz](https://www.imooc.com/article/21823?block_id=tuijian_wz)

* 要先开启定位权限，否则无法搜索到蓝牙设备
* 配对请求：PAIRING_REQUEST

* 1.开启权限




### 1.开启权限

> AndroidManifest.XML 文件

* 蓝牙权限
```java
 <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
 <uses-permission android:name="android.permission.BLUETOOTH" />
```

* 定位权限
```java
  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
```

> BluetoothActivity 文件

```java
// 权限检查
if (ContextCompat.checkSelfPermission(this,Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED){
     ActivityCompat.requestPermissions(BluetoothActivity.this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION},123);
    Log.v("Tag","XH-没有权限");
    return;
}else {
    Log.v("Tag","XH-已经获取权限");
}
```



